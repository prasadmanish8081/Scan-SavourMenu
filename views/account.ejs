<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
    <link rel="stylesheet" href="/stylesheets/style.css">
    <script src="https://cdn.tailwindcss.com"></script>
    <title>Document</title>
</head>
<body>
    <div class="border-b-2 h-20 w-screen flex items-center pl-16 gap-8">
        <h1 class="text-4xl font-bold"><span class="text-green-500">Scan</span>&Savour</h1>
        <a href="/home">My Menus</a>
        <a href="/order">My Orders</a>
        <a href="/account">My Account</a>
        <button><a href="/logout">Log out </a> <span class="text-zinc-300">( <%= user.email %> )</span></button>
    </div>
    <div class="h-screen w-screen flex gap-12">
            <div class="bg-green-500 p-16">
                <h1 class="text-4xl font-semibold mb-5">My Account</h1>
                <p>All your account details all in one place. <br> You'll be able to change account settings, <br> upgrade plans and check your Affiliate <br>program balance here.</p>
            </div>
            <div class="p-16">
                <h1 class="text-4xl font-semibold mb-12">Profile</h1>
                <div class="navbar">
                    <li><a href="#" data-page="general" class="nav-link active" onclick="showPage(event)" >General</a></li>
                    <li><a href="#" data-page="update" class="nav-link" onclick="showPage(event)" >Update Profile</a></li>
                    <li><a href="#" data-page="shop" class="nav-link" onclick="showPage(event)" >Shop</a></li>
                    <li><a href="#" data-page="settings" class="nav-link"  onclick="showPage(event)">Settings</a></li>
                </div>

               
                <div class="content page" id="general">
                    <section id="home" class="active-section">
                        <div class="flex gap-10 p-10">
                            <div>
                                <img class="h-44 w-44 bg-blue-500 rounded-full  mb-9" src="./images/uploads/<%= user.profileImage %>" alt="">
                                <h1 class="text-2xl font-bold mb-5">My Avatar</h1>
                                <p>Your photo should be cool and may <br> use transparency.</p>
                            </div>
                            <div>
                                <h1 class="text-2xl font-semibold mb-5">Personal Details</h1>
                                <p class="text-44 font-bold">Name*</p>
                                <p class="border-b-2 border-green"><%= user.name %></p>
                                <p class="text-44 font-bold">Username*</p>
                                <p class="border-b-2 border-green"><%= user.username %></p>
                                <p class="text-44 font-bold">Email*</p>
                                <p class="border-b-2 border-green"><%= user.email %></p>
                            </div>
                        </div>
                    </section>
                </div>
           

               
                <div class="update page" id="update">
                    <section id="home" class="active-section">
                        <div class="flex gap-10 p-10">
                            <div class="flex flex-col">
                                <button class=" flex justify-center items-center text-5xl text-white font-bold h-44 w-44 bg-blue-500  p-20 rounded-full mb-9 bg-transparent" src="" alt="" onclick="chooseImage()"><i class="bi bi-plus-lg"></i></button>
                                <img class="h-44 w-44 bg-blue-500 rounded-full object-cover absolute -z-10 mb-9" src="" alt="" id="profileImage">
                                <h1 class="text-2xl font-bold mb-5">Change Avatar</h1>
                                <p>Your photo should be cool and may <br> use transparency.</p>
                            </div>
                            <div>
                                <form action="/update" method="post" enctype="multipart/form-data">
                                    <input name="images" class="imagepost" type="file" id="imageInput" accept="image/*" style="display: none" required>
                                    <h1 class="text-2xl font-semibold mb-5">Update Details</h1>
                                    <p class="text-44 font-bold">Name*</p>
                                    <input class="border-b-2 border-green" name="name" type="text" value="<%= user.name %>"></input>
                                    <p class="text-44 font-bold">Username*</p>
                                    <input class="border-b-2 border-green" name="username" type="text" value="<%= user.username %>"></input>
                                    <p class="text-44 font-bold">Email*</p>
                                    <input class="border-b-2 border-green" name="email" type="text" value="<%= user.email %>"></input> <br>
                                    <button class="h-12 w-44 bg-green-500 text-white font-bold text-xl mt-5 rounded-md" type="submit">Save Changes</button>
                                </form>
                            </div>
                        </div>
                    </section>
                </div> 
                
                <div class="shop page" id="shop">
                    <section id="home" class="active-section">
                        <div class="flex gap-10 p-10">
                            <form id="postForm" action="/details" method="post" enctype="multipart/form-data">
                                <div class=" flex gap-12">
                                    <div>
                                        <div class="flex gap-12">
                                            <div class="flex flex-col gap-2">
                                                <label for="type">Type:</label> <br>
                                                <label for="shopname">Name:</label> <br>
                                                <label for="location">Location:</label> <br>
                                                <label for="contact">Contact Number:</label> <br>
                                            </div>
                                            <div class="flex flex-col gap-2">
                                                <input name="images" id="imageIpt"  class="imagepost" type="file"  accept="image/*" style="display: none" >
                                                <input class="border" name="type" value="<%= user.type %>"  class="inputform" type="text" id="type" required> <br>
                                                <input class="border" name="shopname" value="<%= user.shopname %>" class="inputform" type="text" id="name" required><br>
                                                <input class="border" name="location" value="<%= user.location %>" class="inputform" type="text" id="location" required><br>
                                                <input class="border" name="contact" value="<%= user.contact %>" class="inputform" type="tel" id="contact" required><br>
                                            </div>
                                        </div>
                                      <div class="changebtn flex justify-center items-center flex-col">
                                        <button class="postbtn h-9 w-96 border-4 text-xl font-bold border-green-500 rounded-md mb-3" type="submit">Save</button>
                                        <div class="flex gap-7">
                                            <!-- <button class="postbackbtn h-9 w-44 text-xl font-bold text-white text-white flex justify-center items-center rounded-md bg-green-500" type="button" onclick="updatePost()">Update</button>
                                            <button class="postbtn h-9 w-44 flex text-xl font-bold text-white justify-center items-center rounded-md bg-red-500" type="button" onclick="deletePost()">Delete</button> -->
                                        </div>
                                      </div>
                                    </div>
                                    <div>
                                        <img class="h-80 w-96 bg-blue-500  object-cover absolute -z-10 mb-9"  class="h-80 w-96 object-center" src="./images/uploads/<%= user.picture %>" alt="" id="profileImg" >
                                        <button class=" flex justify-center items-center text-5xl text-white font-bold h-80 w-96  p-20  mb-9 bg-transparent" onclick="chooseDetails()" class="postimagebtn"><i class="bi bi-plus-lg"></i></button><br>
                                    </div>
                                </div>
                              </form>
                        </div>
                    </section>
                </div>


                <div id="settings" class="page">
                    <h1>Settings.</h1>
                </div>




            </div>
    </div>
    <script>


function chooseImage() {
    document.getElementById('imageInput').click();
  }

  
function chooseDetails() {
    document.getElementById('imageIpt').click();
  }
  
  document.getElementById('imageInput').addEventListener('change', function(event) {
    const file = event.target.files[0];
    const reader = new FileReader();
  
    reader.onload = function() {
      const image = document.getElementById('profileImage');
      image.src = reader.result;
    };
  
    reader.readAsDataURL(file);
  });

  
  document.getElementById('imageIpt').addEventListener('change', function(event) {
    const file = event.target.files[0];
    const reader = new FileReader();
  
    reader.onload = function() {
      const image = document.getElementById('profileImg');
      image.src = reader.result;
    };
  
    reader.readAsDataURL(file);
  });



  function showPage(event) {
    event.preventDefault();
    
    // Remove 'active' class from all nav links
    const navLinks = document.querySelectorAll('.nav-link');
    navLinks.forEach(link => link.classList.remove('active'));
    
    // Add 'active' class to the clicked nav link
    const clickedLink = event.target;
    clickedLink.classList.add('active');
    
    // Hide all pages
    const pages = document.querySelectorAll('.page');
    pages.forEach(page => page.classList.remove('active'));
    
    // Show the active page
    const pageId = clickedLink.getAttribute('data-page');
    document.getElementById(pageId).classList.add('active');
}

// Initialize the home page as active
document.addEventListener('DOMContentLoaded', () => {
    document.querySelector('.nav-link[data-page="general"]').classList.add('active');
    document.getElementById('general').classList.add('active');
});


function updatePost() {
    const image = document.getElementById('image').files[0];
    const type = document.getElementById('type').value;
    const name = document.getElementById('name').value;
    const location = document.getElementById('location').value;
    const contact = document.getElementById('contact').value;
  
    const formData = new FormData();
    formData.append('images', images);
    formData.append('type', type);
    formData.append('name', name);
    formData.append('location', location);
    formData.append('contact', contact);
  
    // Send the updated post data to the server for processing
    // Example:
    sendUpdatedData(formData);
  
    alert('Post updated successfully');
  }

  
  function deletePost() {
    if (confirm('Are you sure you want to delete this post?')) {
         deleteData(postId);
      alert('Post deleted successfully');
    }
  }

//   function toggleView() {
//     const general = document.getElementById('general');
//     const update = document.getElementById('update');
//     const shop = document.getElementById('shop');
  
//     if (update.style.display === 'none') {
//       general.style.display = 'none';
//       update.style.display = 'block';
//       shop.style.display = 'none';
//     } else if (shop.style.display === 'none') {
//       shop.style.display = 'block';
//       update.style.display = 'none';
//       general.style.display = 'none';
//     }
//     else {
//       shop.style.display = 'none';
//       update.style.display = 'none';
//       general.style.display = 'block';
//     }
//   }


    </script>
</body>
</html>